{% load static %}


<div class="card detailed-card flex-row {% if task %}{{task.status}}-card {% if task.focused %} {{task.status}}-focus {% endif %}{% else %} to_do-card {% endif %}">
    <div class="card-content flex-col">
        <form method="POST" action="{% if task %}{% url 'edit' task.id %}{% else %}{% url 'create' %}{% endif %}">
            {% csrf_token %}
            <div class="superior-card flex-col">
                <div class="actions-container flex-row">
                    <a href="{% url 'home' %}" title="Close">
                        <i class="fa-solid fa-xmark"></i>
                    </a>
                    <button type="submit" title="{% if task %}Save{% else %}Create task{% endif %}">
                        {% if task %}
                            <i class="fa-solid fa-floppy-disk"></i>
                        {% else %}
                            <i class="fa-solid fa-plus"></i>
                        {% endif %}
                    </button>
                </div>
                <textarea name="title" placeholder="Title" class="title auto-resize" maxlength="150" required>{{task.title}}</textarea>
            </div>
            <hr class="{% if task %}{{task.status}}-hr{% else %}to_do-hr{% endif %}">
            <p class="creation_date">Created: {{task.creation_date}}</p>
            <textarea name="detail" placeholder="Detail" class="detail auto-resize" maxlength="150">{{task.detail}}</textarea>
        </form>
    </div>
</div>


<script>
    document.addEventListener('DOMContentLoaded', function () {
        const textareas = document.querySelectorAll('.auto-resize');
    
        textareas.forEach(textarea => {
            autoResize(textarea);
    
            textarea.addEventListener('input', () => autoResize(textarea));
        });
    
        function autoResize(el) {
            el.style.height = 'auto';
            el.style.height = Math.min(el.scrollHeight, 300) + 'px';
        }
    });
</script>
    
