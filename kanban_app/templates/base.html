{% load static %}


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kanban web">
    <meta name="keywords" content="kanban, kanban board, tablero kanban, tareas, tasks">
    <title>Kanboard</title>
    <link rel="icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
    <link rel="stylesheet" href="{% static 'styles/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4" defer></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
</head>
<body>
    {% block content %}{% endblock %}
    <script>
        const openBtn = document.getElementById('open-task-form');
        const closeBtn = document.getElementById('close-task-form');
        const panel = document.getElementById('task-form-panel');
    
        openBtn.addEventListener('click', () => {
            panel.classList.remove('translate-x-full');
            panel.classList.add('translate-x-0');
        });
    
        closeBtn.addEventListener('click', () => {
            panel.classList.add('translate-x-full');
        });
    </script>
    <script>
        function fillTaskForm(el) {
            const panel = document.getElementById('task-form-panel');
            const form = document.getElementById('task-form');

            panel.classList.remove('translate-x-full');
            panel.classList.add('translate-x-0');

            const taskId = el.dataset.taskId;
            const title = el.dataset.taskTitle;
            const detail = el.dataset.taskDetail;
            const priority = el.dataset.taskPriority;
            const status = el.dataset.taskStatus;

            form.action = `/edit/${taskId}/`;
            document.querySelector('#task-id').value = taskId;
            form.title.value = title;
            try {
                form.detail.value = JSON.parse('"' + detail.replace(/"/g, '\\"') + '"');
            } catch (e) {
                form.detail.value = detail;
            }
            form.priority.value = priority;
            form.status.value = status;

            const button = form.querySelector('button[type="submit"]');
            button.textContent = 'Save Task';

            document.querySelector('#task-form-panel h2').textContent = 'Edit Task';
        }
    </script>
    <script>
        const deletePanel = document.getElementById('delete-confirmation-panel');
        const deleteForm = document.getElementById('delete-task-form');
        const cancelDeleteBtn = document.getElementById('cancel-delete');
        const closeBtn2 = document.getElementById('close-delete-form');
    
        function openDeletePanel(taskId) {
            deletePanel.classList.remove('translate-x-full');
            deletePanel.classList.add('translate-x-0');
            deleteForm.action = `/delete/${taskId}/`;
        }
    
        cancelDeleteBtn.addEventListener('click', () => {
            deletePanel.classList.remove('translate-x-0');
            deletePanel.classList.add('translate-x-full');
        });
    
        closeBtn2.addEventListener('click', () => {
            deletePanel.classList.remove('translate-x-0');
            deletePanel.classList.add('translate-x-full');
        });
    </script>    
</body>
</html>
